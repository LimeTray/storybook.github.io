import{j as i}from"./jsx-runtime-8406ef1e.js";import{r as w}from"./index-ad58220e.js";import{D as z,C as $,P as F}from"./react-beautiful-dnd.esm-970fb784.js";import{d as b,o as G}from"./styled-components.browser.esm-d2d81691.js";import{t as J}from"./config-15336477.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-5494d9cc.js";import"./extends-4c19d496.js";import"./toPropertyKey-4015efc6.js";import"./index-4fee7e45.js";import"./tiny-invariant-dd7d57d2.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";const A=e=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:15,fill:"none",...e,children:i.jsx("path",{fill:"#D1D5DB",d:"M4.167 12.503c0 .916-.75 1.666-1.666 1.666-.917 0-1.667-.75-1.667-1.666 0-.917.75-1.667 1.667-1.667.916 0 1.666.75 1.666 1.667ZM2.501 5.836c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm0-5c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm5 3.333c.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666Zm0 1.667c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm0 5c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Z"})});A.__docgenInfo={description:"",methods:[],displayName:"DragIcon"};const C=b.div`
  transition: all 0.2s ease;
  min-height: ${e=>e.isdraggingover?"50px":"auto"};
  background-color: ${e=>e.isdraggingover?e.theme.colors.backgroundSecondary:"transparent"};
  border: 2px dashed ${e=>e.isdraggingover?e.theme.colors.border:"transparent"};
  padding: ${e=>e.isdraggingover?e.isRoot?e.theme.spacing.md:e.theme.spacing.xs:"0"};
  margin: ${e=>e.isdraggingover?"4px 0":"0"};
`,K=b.div`
  border-bottom: ${e=>e.isChild?"none":`1px solid ${e.theme.colors.border}`};
  &:last-child {
    border-bottom: none;
  }
  border-left: ${e=>e.isChild?`2px solid ${e.theme.colors.border}`:"none"};
  margin: ${({theme:e})=>e.margins.small} 0;
  margin-left: ${e=>e.depth*2*parseInt(e.theme.spacing.md)}px;
  background-color: ${e=>e.isDragging?e.theme.colors.border:"white"};
  box-shadow: ${e=>e.isDragging?e.theme.shadows.medium:"none"};
  cursor: ${e=>e.isDragDisabled?"not-allowed":"grab"};
  position: relative;
`,Q=b.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>`${e.padding.small} ${e.padding.small} ${e.padding.small} ${e.padding.medium}`};
`,U=b.div`
  margin-right: ${({theme:e})=>e.spacing.sm};
  display: flex;
  align-items: center;
  cursor: move;
`,T=({items:e,onItemsChange:h,maxNestingLevel:y=1})=>{const[D,S]=w.useState(e);w.useEffect(()=>{S(e)},[e]);const O=s=>{const{source:n,destination:t,draggableId:r}=s;if(!t)return;const m=B(D,n,t,r);S(m),h&&h(m)},B=(s,n,t,r)=>{const a=x(s).find(o=>o.id===r);if(!a)return s;let d=v([...s],r);if(t.droppableId==="root")d.splice(t.index,0,a);else{const o=N(d,t.droppableId);if(o)if(o.subItems||(o.subItems=[]),H(o)<=y&&(a.subItems===void 0||a.subItems.length===0))o.subItems.splice(t.index,0,a);else{const I=d.findIndex(M=>M.id===o.id);d.splice(I+1,0,a)}else d=s}return d},H=s=>{let n=0,t=s;for(;t.subItems&&t.subItems.length>0;)n++,t=t.subItems[0];return n},x=s=>s.reduce((n,t)=>(n.push(t),t.subItems&&n.push(...x(t.subItems)),n),[]),v=(s,n)=>s.reduce((t,r)=>{if(r.id!==n){const m={...r};r.subItems&&(m.subItems=v(r.subItems,n)),t.push(m)}return t},[]),N=(s,n)=>{for(const t of s){if(t.id===n)return t;if(t.subItems){const r=N(t.subItems,n);if(r)return r}}return null},j=(s,n,t=0)=>s.isVisible===!1?null:i.jsx(F,{draggableId:s.id,index:n,isDragDisabled:s.isDragDisabled,children:(r,m)=>i.jsxs(K,{ref:r.innerRef,...r.draggableProps,isDragging:m.isDragging,depth:t,isChild:t>0,isDragDisabled:!!s.isDragDisabled,style:{...r.draggableProps.style,...s.customItemStyle},children:[i.jsxs(Q,{children:[!s.isDragDisabled&&i.jsx(U,{...r.dragHandleProps,children:i.jsx(A,{})}),s.content]}),t<y&&i.jsx($,{droppableId:s.id,type:"nested",children:(a,d)=>{var o;return i.jsxs(C,{ref:a.innerRef,isdraggingover:d.isDraggingOver,...a.droppableProps,children:[(o=s.subItems)==null?void 0:o.filter(g=>g.isVisible!==!1).map((g,I)=>j(g,I,t+1)),a.placeholder]})}})]})},s.id);return i.jsx(G,{theme:J,children:i.jsx(z,{onDragEnd:O,children:i.jsx("div",{children:i.jsx($,{droppableId:"root",type:"nested",children:(s,n)=>i.jsxs(C,{ref:s.innerRef,isdraggingover:n.isDraggingOver,isRoot:!0,...s.droppableProps,children:[D.map((t,r)=>j(t,r)),s.placeholder]})})})})})},W=T;T.__docgenInfo={description:"",methods:[],displayName:"NestedDragList",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  content: ReactNode;
  subItems?: NestedItem[];
  isDragDisabled?: boolean;
  customItemStyle?: React.CSSProperties;
  isVisible?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"ReactNode",required:!0}},{key:"subItems",value:{name:"Array",elements:[{name:"NestedItem"}],raw:"NestedItem[]",required:!1}},{key:"isDragDisabled",value:{name:"boolean",required:!1}},{key:"customItemStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}},{key:"isVisible",value:{name:"boolean",required:!1}}]}}],raw:"NestedItem[]"},description:""},onItemsChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: NestedItem[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  content: ReactNode;
  subItems?: NestedItem[];
  isDragDisabled?: boolean;
  customItemStyle?: React.CSSProperties;
  isVisible?: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"ReactNode",required:!0}},{key:"subItems",value:{name:"Array",elements:[{name:"NestedItem"}],raw:"NestedItem[]",required:!1}},{key:"isDragDisabled",value:{name:"boolean",required:!1}},{key:"customItemStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}},{key:"isVisible",value:{name:"boolean",required:!1}}]}}],raw:"NestedItem[]"},name:"items"}],return:{name:"void"}}},description:""},maxNestingLevel:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}}}};const ue={title:"NestedDragList",component:W},X=[{id:"1",content:"item 1 content",subItems:[{id:"10",content:"SubItem 10 content",customItemStyle:{}},{id:"11",content:"SubItem 11 content",customItemStyle:{}}],customItemStyle:{}},{id:"2",content:"item 2 content",subItems:[{id:"20",content:"SubItem 20 content"},{id:"21",content:"SubItem 21 content"}]},{id:"3",content:"item 3 content",subItems:[{id:"30",content:"SubItem 30 content"},{id:"31",content:"SubItem 31 content",customItemStyle:{}}]},{id:"4",content:"item 4 content",subItems:[]},{id:"5",content:i.jsx("div",{style:{color:"red"},children:"item 5 content"}),isDragDisabled:!0,subItems:[]}],p=[{id:"1",content:"item 1 content",subItems:[{id:"10",content:"SubItem 10 content",customItemStyle:{}},{id:"11",content:"SubItem 11 content",customItemStyle:{}}],customItemStyle:{}},{id:"2",content:"item 2 content",subItems:[{id:"20",content:"SubItem 20 content"},{id:"21",content:"SubItem 21 content"}]},{id:"3",content:"item 3 content",subItems:[{id:"30",content:"SubItem 30 content"},{id:"31",content:"SubItem 31 content",customItemStyle:{}}]},{id:"4",content:"item 4 content",subItems:[]},{id:"5",content:i.jsx("div",{style:{color:"red"},children:"item 5 content"}),isDragDisabled:!0,subItems:[]}];p[0].customItemStyle={border:"1px dashed blue"};p[0].subItems[1].customItemStyle={border:"1px dashed green"};const Y=[{id:"1",content:"item 1 content",subItems:[{id:"10",content:"SubItem 10 content",isVisible:!0},{id:"11",content:"SubItem 11 content",isVisible:!1}]},{id:"2",content:"item 2 content",isVisible:!1,subItems:[{id:"20",content:"SubItem 20 content"},{id:"21",content:"SubItem 21 content"}]},{id:"3",content:"item 3 content",subItems:[{id:"30",content:"SubItem 30 content",isVisible:!0},{id:"31",content:"SubItem 31 content"}]},{id:"4",content:"item 4 content"},{id:"5",content:i.jsx("div",{style:{color:"red"},children:"item 5 content"}),isDragDisabled:!0}],f=e=>i.jsx(W,{...e}),c=f.bind({});c.args={items:X,maxNestingLevel:1,onItemsChange:e=>{console.log("Items changed:",e)}};const l=f.bind({});l.args={items:p,maxNestingLevel:1,onItemsChange:e=>{console.log("Items changed:",e)}};const u=f.bind({});u.args={items:Y,maxNestingLevel:1,onItemsChange:e=>{console.log("Items changed:",e)}};var R,k,q;c.parameters={...c.parameters,docs:{...(R=c.parameters)==null?void 0:R.docs,source:{originalSource:"(args: any) => <NestedDragList {...args} />",...(q=(k=c.parameters)==null?void 0:k.docs)==null?void 0:q.source}}};var L,V,P;l.parameters={...l.parameters,docs:{...(L=l.parameters)==null?void 0:L.docs,source:{originalSource:"(args: any) => <NestedDragList {...args} />",...(P=(V=l.parameters)==null?void 0:V.docs)==null?void 0:P.source}}};var _,Z,E;u.parameters={...u.parameters,docs:{...(_=u.parameters)==null?void 0:_.docs,source:{originalSource:"(args: any) => <NestedDragList {...args} />",...(E=(Z=u.parameters)==null?void 0:Z.docs)==null?void 0:E.source}}};const ge=["Default","CustomItemStyle","WithVisibility"];export{l as CustomItemStyle,c as Default,u as WithVisibility,ge as __namedExportsOrder,ue as default};
